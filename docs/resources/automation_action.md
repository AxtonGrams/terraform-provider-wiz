---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "wiz_automation_action Resource - terraform-provider-wiz"
subcategory: ""
description: |-
  Automation actions define actions to perform for findings.
---

# wiz_automation_action (Resource)

Automation actions define actions to perform for findings.

## Example Usage

```terraform
variable "servicenow_password" {
  type        = string
  sensitive   = true
  description = "ServiceNow credential for Wiz integration"
}

variable "servicenow_user" {
  type        = string
  description = "ServiceNow username for Wiz integration"
}

variable "servicenow_url" {
  type        = string
  description = "ServiceNow URL"
}

variable "jira_token" {
  type        = string
  description = "Jira authentication token"
  sensitive   = true
}

# Service Now Ticket
resource "wiz_automation_action" "servicenow" {
  name                          = "provider_dev"
  type                          = "SERVICENOW_TICKET"
  is_accessible_to_all_projects = false
  servicenow_params {
    base_url = var.servicenow_url
    password = var.servicenow_password
    user     = var.servicenow_user
    ticket_fields {
      description         = <<-EOT
Description:  {{description}}
Status:       {{status}}
Created:      {{createdAt}}
Severity:     {{severity}}
Project:      {{#projects}}{{name}}, {{/projects}}

---
Resource:                   {{entitySnapshot.name}}
Type:                   {{entitySnapshot.nativeType}}
Cloud Platform:         {{entitySnapshot.cloudPlatform}}
Cloud Resource URL:     {{entitySnapshot.cloudProviderURL}}
Subscription Name (ID): {{entitySnapshot.subscriptionName}} ({{entitySnapshot.subscriptionExternalId}})
Region:                 {{entitySnapshot.region}}
Please click the following link to proceed to investigate the issue:
https://{{wizDomain}}/issues#~(issue~'{{id}})
Source Automation Rule: {{ruleName}}
EOT
      summary             = "Wiz Issue: {{control.name}}"
      table_name          = "incident"
      attach_evidence_csv = true
      custom_fields = jsonencode(
        {
          "assignment_group" : "HELPDESK",
          "category" : "Security",
          "impact" : "3 - Low",
          "subcategory" : "IDS",
          "urgency" : "1 - High"
        }
      )
    }
  }
}

# Service Now Update
resource "wiz_automation_action" "servicenow_update" {
  name = "provider_dev_update"
  type = "SERVICENOW_UPDATE_TICKET"
  servicenow_update_ticket_params {
    base_url   = var.servicenow_url
    password   = var.servicenow_password
    user       = var.servicenow_user
    table_name = "incident"
  }
}

# Jira Ticket
resource "wiz_automation_action" "jira_ticket" {
  name                          = "Jira Ticket"
  is_accessible_to_all_projects = true
  type                          = "JIRA_TICKET"
  jira_params {
    is_onprem  = false
    server_url = "https://jira.atlassian.net"
    token      = var.jira_token
    user       = "someone@example.com"
    ticket_fields {
      fix_version         = ["Q2.2022"]
      description         = "Wiz Issue"
      issue_type          = "story"
      project             = "WIZ"
      summary             = "Wiz Finding"
      attach_evidence_csv = true
    }
    tls_config {
      allow_insecure_tls = false
    }
  }
}

# Jira Ticket Transition
resource "wiz_automation_action" "jira_transition" {
  name                          = "Jira Transition"
  is_accessible_to_all_projects = true
  type                          = "JIRA_TICKET_TRANSITION"
  jira_transition_params {
    is_onprem     = false
    project       = "WIZ"
    server_url    = "https://jira.atlassian.net"
    token         = var.jira_token
    user          = "someone@example.com"
    transition_id = "Defined"
    tls_config {
      allow_insecure_tls = false
    }
  }
}

resource "wiz_automation_action" "pagerduty_create" {
  name                          = "terraform-test-pagerduty-create"
  type                          = "PAGER_DUTY_CREATE_INCIDENT"
  is_accessible_to_all_projects = true
  webhook_params {
    body = <<EOT
{
  "dedup_key": "{{id}}",
  "event_action": "trigger",
  "routing_key": "testtesttesttesttesttesttesttest",
  "payload": {
    "custom_details": [
      {
        "trigger": {
          "source": "{{triggerSource}}",
          "type": "{{triggerType}}",
          "ruleId": "{{ruleId}}",
          "ruleName": "{{ruleName}}"
        },
        "issue": {
          "id": "{{id}}",
          "status": "{{status}}",
          "severity": "{{severity}}",
          "created": "{{createdAt}}",
          "projects": "{{#projects}}{{name}}, {{/projects}}"
        },
        "resource": {
          "id": "{{entitySnapshot.providerId}}",
          "name": "{{entitySnapshot.name}}",
          "type": "{{entitySnapshot.nativeType}}",
          "cloudPlatform": "{{entitySnapshot.cloudPlatform}}",
          "subscriptionId": "{{entitySnapshot.subscriptionExternalId}}",
          "subscriptionName": "{{entitySnapshot.subscriptionName}}",
          "region": "{{entitySnapshot.region}}",
          "status": "{{entitySnapshot.status}}",
          "cloudProviderURL": "{{entitySnapshot.cloudProviderURL}}"
        },
        "control": {
          "id": "{{control.id}}",
          "name": "{{control.name}}",
          "description": "{{description}}",
          "severity": "{{severity}}"
        }
      }
    ],
    "summary": "wiz alert",
    "severity": "critical",
    "source": "wiz"
  }
}
EOT
    url  = "https://events.pagerduty.com/v2/enqueue"
  }
}

resource "wiz_automation_action" "pagerduty_resolve" {
  name                          = "terraform-test-pagerduty-resolve"
  type                          = "PAGER_DUTY_RESOLVE_INCIDENT"
  is_accessible_to_all_projects = true
  webhook_params {
    body = <<EOT
{
  "dedup_key": "{{id}}",
  "event_action": "resolve",
  "routing_key": "testtesttesttesttesttesttesttest"
}
EOT
    url  = "https://events.pagerduty.com/v2/enqueue"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- **is_accessible_to_all_projects** (Boolean)
- **name** (String)
- **type** (String) The automation action type

### Optional

- **aws_message_params** (Block Set, Max: 1) If type is AWS_SNS, define these parameters
    - Conflicts with `[azure_service_bus_params email_params google_chat_params google_pub_sub_params jira_params jira_transition_params servicenow_params servicenow_update_ticket_params slack_params webhook_params]`. (see [below for nested schema](#nestedblock--aws_message_params))
- **azure_service_bus_params** (Block Set, Max: 1) If type is AZURE_SERVICE_BUS, define these parameters
    - Conflicts with `[aws_message_params email_params google_chat_params google_pub_sub_params jira_params jira_transition_params servicenow_params servicenow_update_ticket_params slack_params webhook_params]`. (see [below for nested schema](#nestedblock--azure_service_bus_params))
- **email_params** (Block Set, Max: 1) If type is EMAIL, define these paramemters.
    - Conflicts with `[aws_message_params azure_service_bus_params google_chat_params google_pub_sub_params jira_params jira_transition_params servicenow_params servicenow_update_ticket_params slack_params webhook_params]`. (see [below for nested schema](#nestedblock--email_params))
- **google_chat_params** (Block Set, Max: 1) If type is GOOGLE_CHAT_MESSAGE, define these parameters
    - Conflicts with `[aws_message_params azure_service_bus_params email_params google_pub_sub_params jira_params jira_transition_params servicenow_params servicenow_update_ticket_params slack_params webhook_params]`. (see [below for nested schema](#nestedblock--google_chat_params))
- **google_pub_sub_params** (Block Set, Max: 1) If type is GOOGLE_PUB_SUB, define these parameters
    - Conflicts with `[aws_message_params azure_service_bus_params email_params google_chat_params jira_params jira_transition_params servicenow_params servicenow_update_ticket_params slack_params webhook_params]`. (see [below for nested schema](#nestedblock--google_pub_sub_params))
- **jira_params** (Block Set, Max: 1) If type is JIRA_TICKET, define these parameters
    - Conflicts with `[aws_message_params azure_service_bus_params email_params google_chat_params google_pub_sub_params jira_transition_params servicenow_params servicenow_update_ticket_params slack_params webhook_params]`. (see [below for nested schema](#nestedblock--jira_params))
- **jira_transition_params** (Block Set, Max: 1) If type is JIRA_TICKET_TRANSITION, define these parameters
    - Conflicts with `[aws_message_params azure_service_bus_params email_params google_chat_params google_pub_sub_params jira_params servicenow_params servicenow_update_ticket_params slack_params webhook_params]`. (see [below for nested schema](#nestedblock--jira_transition_params))
- **project_id** (String)
- **servicenow_params** (Block Set, Max: 1) If type is SERVICENOW_TICKET, define these parameters
    - Conflicts with `[aws_message_params azure_service_bus_params email_params google_chat_params google_pub_sub_params jira_params jira_transition_params servicenow_update_ticket_params slack_params webhook_params]`. (see [below for nested schema](#nestedblock--servicenow_params))
- **servicenow_update_ticket_params** (Block Set, Max: 1) If type is SERVICENOW_UPDATE_TICKET, define these parameters
    - Conflicts with `[aws_message_params azure_service_bus_params email_params google_chat_params google_pub_sub_params jira_params jira_transition_params servicenow_params slack_params webhook_params]`. (see [below for nested schema](#nestedblock--servicenow_update_ticket_params))
- **slack_params** (Block Set, Max: 1) If type is SLACK_MESSAGE, define these parameters
    - Conflicts with `[aws_message_params azure_service_bus_params email_params google_chat_params google_pub_sub_params jira_params jira_transition_params servicenow_params servicenow_update_ticket_params webhook_params]`. (see [below for nested schema](#nestedblock--slack_params))
- **webhook_params** (Block Set, Max: 1) If type is WEBHOOK, define these parameters.
    - Conflicts with `[aws_message_params azure_service_bus_params email_params google_chat_params google_pub_sub_params jira_params jira_transition_params servicenow_params servicenow_update_ticket_params slack_params]`. (see [below for nested schema](#nestedblock--webhook_params))

### Read-Only

- **created_at** (String)
- **id** (String) Wiz internal identifier.

<a id="nestedblock--aws_message_params"></a>
### Nested Schema for `aws_message_params`

Required:

- **access_method** (Block Set, Min: 1, Max: 1) (see [below for nested schema](#nestedblock--aws_message_params--access_method))
- **body** (String)
- **sns_topic_arn** (String)

<a id="nestedblock--aws_message_params--access_method"></a>
### Nested Schema for `aws_message_params.access_method`

Optional:

- **connector_for_access** (String) Required if and only if access method is ASSUME_CONNECTOR_ROLE, this should be a valid existing AWS connector ID
- **customer_role_arn** (String) Required if and only if access method is ASSUME_SPECIFIED_ROLE, this is the role that should be assumed, the ExternalID of the role must be your Wiz Tenant ID (a GUID)



<a id="nestedblock--azure_service_bus_params"></a>
### Nested Schema for `azure_service_bus_params`

Required:

- **access_method** (Block Set, Min: 1, Max: 1) (see [below for nested schema](#nestedblock--azure_service_bus_params--access_method))
- **body** (String)
- **queue_url** (String)

<a id="nestedblock--azure_service_bus_params--access_method"></a>
### Nested Schema for `azure_service_bus_params.access_method`

Optional:

- **connection_string_with_sas** (String) Required if and only if access method is CONNECTION_STRING_WITH_SAS, this should be the connection string that contains the Shared access secret SAS For example: Endpoint=sb://my-sb-namespace.servicebus.windows.net/;SharedAccessKeyName=RootManageSharedAccessKey
- **connector_for_access** (String) Required if and only if access method is CONNECTOR_CREDENTIALS, this should be a valid existing Azure connector ID



<a id="nestedblock--email_params"></a>
### Nested Schema for `email_params`

Required:

- **to** (List of String)

Optional:

- **attach_evidence_csv** (Boolean)
- **cc** (List of String)
- **note** (String)


<a id="nestedblock--google_chat_params"></a>
### Nested Schema for `google_chat_params`

Required:

- **url** (String) google chat webhook url in the format: https://chat.googleapis.com/v1/spaces/AAAA0000000/messages?key=XXXXX&token=XXXXX; see https://developers.google.com/hangouts/chat/how-tos/webhooks#define_an_incoming_webhook

Optional:

- **note** (String) This is an optional note which will be added to the message that will be sent to the google chat room it is a template that will be resolved with the following parameters: TBD, the format is Mustache


<a id="nestedblock--google_pub_sub_params"></a>
### Nested Schema for `google_pub_sub_params`

Required:

- **access_method** (Block Set, Min: 1, Max: 1) (see [below for nested schema](#nestedblock--google_pub_sub_params--access_method))
- **body** (String)
- **project_id** (String)
- **topic_id** (String)

<a id="nestedblock--google_pub_sub_params--access_method"></a>
### Nested Schema for `google_pub_sub_params.access_method`

Optional:

- **connector_for_access** (String) Required if and only if access method is CONNECTOR_CREDENTIALS, this should be a valid existing GCP connector ID
- **service_account_key** (String, Sensitive) Required if and only if access method is SERVICE_ACCOUNT_KEY, this should be the Service account key JSON file you downloaded from GCP. Value should be wrapped in jsonencode() to prevent false diffs.



<a id="nestedblock--jira_params"></a>
### Nested Schema for `jira_params`

Required:

- **is_onprem** (Boolean) Is the Jira service is only accessible on-premise?
- **server_url** (String)
- **ticket_fields** (Block Set, Min: 1, Max: 1) Ticket fields (see [below for nested schema](#nestedblock--jira_params--ticket_fields))
- **tls_config** (Block Set, Min: 1, Max: 1) custom TLS config (custom server CA, client certificate etc..) (see [below for nested schema](#nestedblock--jira_params--tls_config))

Optional:

- **jira_authentication_basic** (Block Set, Max: 1) (see [below for nested schema](#nestedblock--jira_params--jira_authentication_basic))
- **jira_authentication_token** (Block Set, Max: 1) (see [below for nested schema](#nestedblock--jira_params--jira_authentication_token))
- **onprem_tunnel_domain** (String)
- **onprem_tunnel_token** (String, Sensitive)

<a id="nestedblock--jira_params--ticket_fields"></a>
### Nested Schema for `jira_params.ticket_fields`

Required:

- **description** (String)
- **issue_type** (String)
- **project** (String)
- **summary** (String)

Optional:

- **alternative_description_field** (String)
- **assignee** (String)
- **attach_evidence_csv** (Boolean) - Defaults to `false`.
- **components** (List of String)
- **custom_fields** (String) Value should be wrapped in jsonencode() to prevent false diffs.
- **fix_version** (List of String)
- **labels** (List of String)
- **priority** (String)


<a id="nestedblock--jira_params--tls_config"></a>
### Nested Schema for `jira_params.tls_config`

Optional:

- **allow_insecure_tls** (Boolean) Setting this to true will ignore any TLS validation errors on the server side certificate Warning: should only be used to validate that the action works regardless of TLS validation, if for example your server is presenting self signed or expired TLS certificate
    - Defaults to `false`.
- **client_certificate_and_private_key** (String, Sensitive) a PEM of the client certificate as well as the certificate private key
- **server_ca** (String) a PEM of the certificate authority that your server presents (if you use self signed, or custom CA)


<a id="nestedblock--jira_params--jira_authentication_basic"></a>
### Nested Schema for `jira_params.jira_authentication_basic`

Required:

- **password** (String, Sensitive)
- **username** (String)


<a id="nestedblock--jira_params--jira_authentication_token"></a>
### Nested Schema for `jira_params.jira_authentication_token`

Required:

- **token** (String, Sensitive)



<a id="nestedblock--jira_transition_params"></a>
### Nested Schema for `jira_transition_params`

Required:

- **is_onprem** (Boolean) Is the Jira service is only accessible on-premise?
- **project** (String)
- **server_url** (String)
- **tls_config** (Block Set, Min: 1, Max: 1) custom TLS config (custom server CA, client certificate etc..) (see [below for nested schema](#nestedblock--jira_transition_params--tls_config))
- **transition_id** (String) Transition Id or Name

Optional:

- **comment** (String)
- **comment_on_transition** (Boolean) Comment on transition?
    - Defaults to `false`.
- **fields** (String) JSON representation of field updates. Value should be wrapped in jsonencode() to prevent false diffs.
- **jira_authentication_basic** (Block Set, Max: 1) (see [below for nested schema](#nestedblock--jira_transition_params--jira_authentication_basic))
- **jira_authentication_token** (Block Set, Max: 1) (see [below for nested schema](#nestedblock--jira_transition_params--jira_authentication_token))
- **onprem_tunnel_domain** (String)
- **onprem_tunnel_token** (String, Sensitive)

<a id="nestedblock--jira_transition_params--tls_config"></a>
### Nested Schema for `jira_transition_params.tls_config`

Optional:

- **allow_insecure_tls** (Boolean) Setting this to true will ignore any TLS validation errors on the server side certificate Warning: should only be used to validate that the action works regardless of TLS validation, if for example your server is presenting self signed or expired TLS certificate
    - Defaults to `false`.
- **client_certificate_and_private_key** (String, Sensitive) a PEM of the client certificate as well as the certificate private key
- **server_ca** (String) a PEM of the certificate authority that your server presents (if you use self signed, or custom CA)


<a id="nestedblock--jira_transition_params--jira_authentication_basic"></a>
### Nested Schema for `jira_transition_params.jira_authentication_basic`

Required:

- **password** (String, Sensitive)
- **username** (String)


<a id="nestedblock--jira_transition_params--jira_authentication_token"></a>
### Nested Schema for `jira_transition_params.jira_authentication_token`

Required:

- **token** (String, Sensitive)



<a id="nestedblock--servicenow_params"></a>
### Nested Schema for `servicenow_params`

Required:

- **base_url** (String)
- **password** (String, Sensitive)
- **ticket_fields** (Block Set, Min: 1, Max: 1) (see [below for nested schema](#nestedblock--servicenow_params--ticket_fields))
- **user** (String) Email of a Jira user with permissions to create tickets

Optional:

- **client_id** (String)
- **client_secret** (String, Sensitive)

<a id="nestedblock--servicenow_params--ticket_fields"></a>
### Nested Schema for `servicenow_params.ticket_fields`

Required:

- **description** (String) Ticket description
- **summary** (String) Ticket summary
- **table_name** (String) Table name to which new tickets will be added to, e.g: 'Incident'

Optional:

- **attach_evidence_csv** (Boolean) Attache evidence.
    - Defaults to `false`.
- **custom_fields** (String) Custom configuration fields as specified in Service Now. Make sure you add the fields that are configured as required in Service Now Project, otherwise ticket creation will fail. Value should be wrapped in jsonencode() to prevent false diffs.



<a id="nestedblock--servicenow_update_ticket_params"></a>
### Nested Schema for `servicenow_update_ticket_params`

Required:

- **base_url** (String)
- **password** (String, Sensitive)
- **table_name** (String)
- **user** (String) Email of a Jira user with permissions to create tickets

Optional:

- **client_id** (String)
- **client_secret** (String, Sensitive)
- **fields** (String) Value should be wrapped in jsonencode() to prevent false diffs.


<a id="nestedblock--slack_params"></a>
### Nested Schema for `slack_params`

Required:

- **url** (String) slack url in the format: https://hooks.slack.com/services/T00000000/B00000000/XXXXXXXXXXXXXXXXXXXXXXXX ; see https://api.slack.com/messaging/webhooks

Optional:

- **channel** (String) The slack webhook has default channel, you can specify a different channel here #your-public-channel, or a specific user with @ e.g: @myself
- **note** (String) This is the message body that will be sent to the slack channel it is a template that will be resolved with the following parameters: TBD, the format is Mustache


<a id="nestedblock--webhook_params"></a>
### Nested Schema for `webhook_params`

Required:

- **body** (String)
- **url** (String)

Optional:

- **auth_password** (String, Sensitive)
- **auth_token** (String, Sensitive) For auth bearer specify token, do not specify username/password
- **auth_username** (String) For basic authorization specify username and password, do NOT specify authToken
- **client_certificate** (String) optional client cert


